---
layout: "post"
title:  "Jekyll个性化配置"
date:   "2023-12-06 00:00:00 +0800"
categories: [jekyll]
tags: [jekyll]
---
{% include /custom/toc.md %}

> **英文官网** [jekyllrb.com](https://jekyllrb.com/)  
> **中文操作指南** [www.jekyll.com.cn](https://www.jekyll.com.cn/docs/#%E6%93%8D%E4%BD%9C%E6%8C%87%E5%8D%97)
> **jekyllrb配置项文档** [jekyll-Configuration](https://jekyllrb.com/docs/configuration/)

## 个性化设置

---

#### Front Matter值加上引号，兼容IDEA的代码格式化

Front Matter是`YAML`语法,值加上引号也能正常识别，这样能兼容IDEA的代码格式化


---

#### markdown目录`[TOC]`设置

jekyll 的kramdown不支持`[TOC]`自动生成目录的方式,格式稍微有些区别。

在站点根目录下`/_includes/`目录下新建一个`toc.md`文件。  
内容如下

```markdown
- TOC   
  {:toc}
```

在文章正文开头加入一段Liquid模板语言就等于`[TOC]`了 {% raw %}

```

```

{% endraw %}

---

#### markdown 中直接写html代码

- 在markdown中直接写html代码。
- 在Markdown中嵌入HTML代码时，有些HTML元素可能会与Markdown的语法冲突，比如标签、**加粗**、`代码块`等等。为了避免这种冲突，我们可以在HTML代码的外围加上<!--md-->
  标记来告诉Markdown这部分内容不需要进行格式化。

```markdown
<!--md-->
<em>这是一段斜体文字</em>
**这是一段加粗的文字**
`这是一段代码`
<!--md-->
```

#### 本地运行jekyll服务可选启动参数

在启动命令```bash  bundle exec jekyll serve```后追加参数扩展

- 要强制浏览器在每次更改时刷新，加参数`--livereload`  
  *不包括更改`_config.yml`文件的动作，此时还是需要重启服务器失效*
- 启动后自动打开首页，加参数`--open_url`
- 预览包含草稿的文章，加参数`--drafts`

```bash
  bundle exec jekyll serve --livereload --open_url --drafts
```

---

## 配置文件相关`_config.yml`

> [Configuration](https://jekyllrb.com/docs/configuration/)  
> 更改`_config.yml`文件需要重启服务器

### jekyll编译生成网站时区配置

`timezone: Asia/Shanghai`

在githubpages中编译发布后，发现文章标记的时间与本地不一致，所以可以在`_config.yml`中显式的设置时区

### jekyll生成网页的语言标识

`lang: zh-CN`  
对应的网页头部

```html
<!DOCTYPE html>
<html lang="zh-CN">
```

### 调整jekyll文章路径规则

> https://jekyllrb.com/docs/permalinks/

```
permalink: /:year/:month/:day/:title:output_ext

#默认值 
#permalink: /:categories/:year/:month/:day/:title:output_ext
```

- `:year` 按年份存放文章
- `:month` 按月份存放文章
- `:day` 按天存放文章
- `:title` 按标题存放文章
- `:output_ext` 输出文件扩展名

[//]: # (### 生成页面摘录) 暂时未用

[//]: # (`page_excerpts`设置为 true)


---

## 插件

> [Plugins](https://jekyllrb.com/docs/plugins/)  
> 注意是否需要在_config.yml中配置白名单
 
> [github pages 插件列表](https://pages.github.com/versions/)  
！！！在githubPages部署无法使用不在列表中的插件，需要本地生成网站后推送上去。

### [jekyll-feed](https://github.com/jekyll/jekyll-feed)

> 生成RSS订阅

### [jekyll-seo-tag](https://github.com/jekyll/jekyll-seo-tag)

> 自动生成网页的元信息


### [jekyll-admin](https://github.com/jekyll/jekyll-admin/)

> 在本地配合使用`bundle exec jekyll serve`一起使用。  
> 为用户提供传统的CMS风格的图形界面来编写内容和管理Jekyll网站。  
> 访问地址是：`http://localhost:4000/admin`

### [jekyll-avatar](https://github.com/jekyll/jekyll-avatar)

> 可以引用github平台账号头像


### [jekyll-gist](https://github.com/jekyll/jekyll-gist)

> 可以引用github平台的gist代码片段


### [jekyll-sitemap](https://github.com/jekyll/jekyll-sitemap)

> 用于生成站点地图文件 sitemap.xml,供搜索引擎抓取。方便搜索引擎收纳网站中各个页面的 URL。



### [Jekyll Target Blank](https://github.com/keithmifsud/jekyll-target-blank)

> 可以给网站中的链接自动添加target="_blank"，可以避免超链接在当前浏览器去窗口打开的问题。  
> 这个插件在github pages用不了。。用鼠标中键或定制脚本代替吧。。。
### [jekyll-sitemap](https://github.com/jekyll/jekyll-sitemap)

> 生成站点地图

---

## 主题

> [Themes](https://jekyllrb.com/docs/themes/)

### github pages 支持主题

> [github pages 支持主题](https://pages.github.com/themes/)

比如:  https://github.com/pages-themes/hacker#usage

Usage To use the Hacker theme:

- Add the following to your site's _config.yml:

```
remote_theme: pages-themes/hacker@v0.2.0
plugins:
- jekyll-remote-theme # add this line to the plugins list if you already have one
```

- Optionally, if you'd like to preview your site on your computer, add the following to your site's Gemfile:

```
gem "github-pages", group: :jekyll_plugins
```

> 只用配置文件改换主题，其实不行。。  
> 因为默认minima主题默认包含了很多文件，比如首页home、文章页post的样式。  
> 直接换成其他主题，这些都找不到了，需要重新配置md文章中layout样式。等等。。


---

##  其他
### [gittalk](https://github.com/gitalk/gitalk)
>  Gitalk 是一个基于 GitHub Issue 和 Preact 开发的评论插件


---
## ？？？

---

## 参考资料

- [jekyll自动生成目录的几种方案](https://plutotree.me/2019-01-30/jekyll-toc-solution.html)
- [GitHub Pages 与 Gitee Pages 上的 Jekyll](https://www.xjtu-blacksmith.cn/essay/jekyll-of-pages)

- [Jekyll官网](https://jekyllrb.com/)
- [Jekyll官网-永久连接](https://jekyllrb.com/docs/permalinks/)

## 最后更新时间：2023-12-08